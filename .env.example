# Environment Configuration Guide - Option A

## API Configuration

### Development Environment

The application automatically connects to your local backend at:
```
http://localhost:9090/api/v1
```

This is the default and requires no configuration.

### Production Environment

Create a `.env.local` file in the project root:

```env
VITE_API_URL=https://api.yourdomain.com/api/v1
```

**Available environment variables:**
- `VITE_API_URL` - Backend API base URL
- `VITE_APP_TITLE` - Application title (optional)

### Environment Files

Vite supports multiple environment files:

```
.env                 # Loaded in all cases
.env.local           # Local overrides (not committed)
.env.[mode]          # Mode-specific (e.g., .env.production)
.env.[mode].local    # Local mode overrides
```

### Accessing Environment Variables

In your code:

```javascript
const apiUrl = import.meta.env.VITE_API_URL;
const isDev = import.meta.env.DEV;
const isProd = import.meta.env.PROD;
```

## API Endpoints Used

### Projects
- `GET /api/v1/projects` - Fetch all projects
- `GET /api/v1/projects/{id}` - Fetch single project (ready for future)

### Experiences
- `GET /api/v1/experiences` - Fetch all experiences
- `GET /api/v1/experiences/{id}` - Fetch single experience (ready for future)

### Resume
- `GET /api/v1/resume/download` - Download resume PDF
- `GET /api/v1/resume/status` - Get resume availability

## Deployment Configurations

### Vercel

Vercel automatically reads environment variables from `.env.local`:

1. Push to GitHub
2. Import project in Vercel
3. Add environment variable in Settings â†’ Environment Variables:
   - Name: `VITE_API_URL`
   - Value: Your production API URL
4. Deploy

### Netlify

Create `netlify.toml` (already included):

```toml
[build]
  command = "npm run build"
  functions = "netlify/functions"
  publish = "dist"

[env]
  [env.production]
    VITE_API_URL = "https://api.yourdomain.com/api/v1"
```

### Docker

Create `Dockerfile` for containerization:

```dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM node:18-alpine
WORKDIR /app
RUN npm install -g serve
COPY --from=builder /app/dist ./dist
EXPOSE 5173
CMD ["serve", "-s", "dist", "-l", "5173"]
```

Build and run:
```bash
docker build -t portfolio-fullstack .
docker run -p 5173:5173 -e VITE_API_URL=https://api.yourdomain.com/api/v1 portfolio-fullstack
```

## SSL/HTTPS Configuration

For production APIs with HTTPS:

```env
VITE_API_URL=https://secure-api.yourdomain.com/api/v1
```

The axios client automatically handles HTTPS requests.

## CORS Configuration

If backend is on different domain, ensure backend has CORS enabled:

```java
// Spring Boot configuration
@Configuration
public class CorsConfig {
    @Bean
    public WebMvcConfigurer corsConfigurer() {
        return new WebMvcConfigurer() {
            @Override
            public void addCorsMappings(CorsRegistry registry) {
                registry.addMapping("/api/**")
                    .allowedOrigins("https://yourdomain.com")
                    .allowedMethods("GET", "POST", "PUT", "DELETE")
                    .allowCredentials(true)
                    .maxAge(3600);
            }
        };
    }
}
```

## Authentication (For Future Use)

When adding auth in Option C, store token in localStorage:

```javascript
// After login
localStorage.setItem('authToken', token);

// API client automatically includes it:
// Authorization: Bearer {token}
```

## Error Handling

API errors are logged in console and shown to users:

```javascript
// Development: Full error messages in console
// Production: User-friendly error messages in UI
```

Check browser console (F12) for detailed API logs.

## Testing API Connection

```bash
# Test backend is running
curl http://localhost:9090/api/v1/projects

# Test frontend can connect
npm run dev
# Visit http://localhost:5173 and check console
```

## Troubleshooting

### 404 Errors from API
- Check backend is running on `localhost:9090`
- Verify endpoints exist in Spring Boot controller
- Check VITE_API_URL is set correctly

### CORS Errors
- Backend must include CORS headers
- Check backend CORS configuration
- Use proxy in development if needed

### Environment Variables Not Loading
- Restart dev server after changing `.env.local`
- Ensure variable starts with `VITE_`
- Check `.gitignore` includes `.env.local`

## Production Deployment Checklist

- [ ] Backend API URL set in environment variables
- [ ] SSL/HTTPS configured
- [ ] CORS configured in backend
- [ ] Rate limiting configured (if needed)
- [ ] Error tracking set up (Sentry, etc.)
- [ ] Performance monitoring set up
- [ ] Build tested locally (`npm run build`)
- [ ] Environment variables tested in production

---

Next: Proceed to Option B (Cloud Deployment) when ready!
